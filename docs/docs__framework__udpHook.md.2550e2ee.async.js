(self["webpackChunkenhe_design"]=self["webpackChunkenhe_design"]||[]).push([[876],{12948:function(e,n,t){"use strict";t.r(n);var a=t(67294),l=t(96089),s=(t(78296),t(9971)),o=(t(10676),t(8723),t(27832),t(12178)),c=(t(50043),t(80963),a.memo((function(e){e.demos;return a.createElement(a.Fragment,null,a.createElement("div",{className:"markdown"},a.createElement("p",null,a.createElement(s.Z,{type:"success"},"\u610f\u4e49: \u7b80\u5355\uff01\u7b80\u5355\uff01\u7b80\u5355\uff01")),a.createElement("h2",{id:"useismount"},a.createElement(l.AnchorLink,{to:"#useismount","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"useIsMount"),a.createElement("blockquote",null,a.createElement("p",null,"\u5224\u65ad\u7ec4\u4ef6\u662f\u5426\u88ab\u5378\u8f7d")),a.createElement("blockquote",null,a.createElement("p",null,"\u5f53\u7ec4\u4ef6\u88ab\u5378\u8f7d\u4e4b\u540e\uff0c\u5982\u679c\u5b58\u5728\u5f02\u6b65\u64cd\u4f5c\uff0c\u53ef\u80fd\u5f02\u6b65\u64cd\u4f5c\u5728\u7ec4\u4ef6\u5378\u8f7d\u4e4b\u540e\u6267\u884c\uff0c\u5bfc\u81f4\u7ec4\u4ef6\u7684\u771f\u5b9eDOM\u88ab\u5378\u8f7d\u5374\u5728\u66f4\u65b0\u72b6\u6001\uff0c\u867d\u7136\u4e0d\u4f1a\u5e26\u6765\u5f02\u5e38\uff0c\u4f46\u662f\u5b58\u5728\u5185\u5b58\u6cc4\u9732\u7684\u98ce\u9669")),a.createElement(o.Z,{code:"const FComponent = () => {\n    const [child,setChild] = useState([\n      {\n        id: 1\n      },\n      {\n        id: 2\n      },\n    ]);\n\n    return <>\n        {child.map(item => <Component \n          id={item.id} \n          func={async () => {\n              setChild([{id: 2}]);\n              await fetch('/api/post');\n          }}/>)\n        }\n      <>\n}\n\nconst Component = ({id,func}) => {\n\n    const isMount = useIsMount();\n    const [state, setState] = useState();\n\n    return (<a disable={state}\n               onClick={async (id) => {\n                   try {\n                       setState(true)\n                       await func(id);\n                   } catch (e) {\n                       console.log(e)\n                   } finally {\n                       isMount && setState(false);\n                   }\n               }}\n    >\u6d4b\u8bd5</a>);\n};",lang:"javascript"}),a.createElement("h2",{id:"usemapdatamodel"},a.createElement(l.AnchorLink,{to:"#usemapdatamodel","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"useMapDataModel"),a.createElement("blockquote",null,a.createElement("p",null,"\u57fa\u4e8euseModel\u7684Map\u683c\u5f0f\u5168\u5c40\u6570\u636e\u6d41")),a.createElement(o.Z,{code:"declare namespace API {\n    interface dataType {\n        title: string;\n        value: string;\n    }\n}\n\nconst Page1 = () => {\n  const {setModel} = useMapDataModel <API.dataType> ('uniqueKey');\n  \n  return <Button onClick={() => { setModel({\n    title: 'title',\n    value: 'value,'\n  });}>\u8bbe\u7f6e</Button>\n}\nconst Page2 = () => {\n        const {model} = useMapDataModel <API.dataType> ('uniqueKey');\n\n        return <>\n          {`title: ${model.title}`}\n          {`value: ${model.value}`}\n        </>;\n}",lang:"javascript"}),a.createElement("h2",{id:"useprotablerequest"},a.createElement(l.AnchorLink,{to:"#useprotablerequest","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"useProTableRequest"),a.createElement("blockquote",null,a.createElement("p",null,"\u6258\u7ba1ProTable\u8bf7\u6c42\u4e2d\u7684list\u8bf7\u6c42\u548ccount\u8bf7\u6c42")),a.createElement(o.Z,{code:"const [countDep,setCountDep] = useState(false);\nconst actoinRef = useRef<ActionType>()\nconst handleSearch = useProTableRequest<API.TaskListItem> ((formData) => {\n\n    assign (formData, {\n      jobId: '456',\n      jobIdNotNull: true\n    });\n    \n    return {\n      list: async () => await list (formData),\n      count: async () => await count (formData),\n    }\n  }, {\n    countDeps: [countDep]\n  });\n\n<ProTable\n  columns={[\u2026\u2026]}\n  actionRef={actionRef}\n  request={handleSearch}\n/>\n\n<Button onClick={async () => {\n    await fetch('api/insert');\n    setCountDep(!countDep);\n    actionRef.current?.reload();\n}}>\u65b0\u589e</Button>",lang:"javascript"}),a.createElement("h2",{id:"userequestlist"},a.createElement(l.AnchorLink,{to:"#userequestlist","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"useRequestList"),a.createElement("blockquote",null,a.createElement("p",null,"\u6258\u7ba1list\u52a0\u8f7d\u66f4\u591a\u8bf7\u6c42\u4e2d\u7684list\u8bf7\u6c42\u548ccount\u8bf7\u6c42")),a.createElement(o.Z,{code:'import { Spin } from "antd";\nconst useRequestParams = useRef<useRequestListParamsType>({pageSize: 4});\n\nconst Component = () => {\n    const {\n        loading,\n        data,\n        moreButton,\n        refresh,\n        runList\n    } = useRequestList < API.ListItem > ((d) => {\n        return {\n            params: useRequestParams.current,\n            list: handleSearchList,\n            count: handleSearchCount\n        }\n    });\n\n    return (<Spin loading={loading}>\n        {\n            data.list.map(item => <div>{item.props}</div>)\n        }\n        <Button onClick={() => {\n            refresh()\n        }}>\n            \u5237\u65b0\u6240\u6709\n        </Button>\n        <Button onClick={() => {\n            runList()\n        }}>\n            \u91cd\u65b0\u52a0\u8f7d\u5217\u8868\n        </Button>\n      // \u66f4\u591a\u6309\u94ae\uff0c\u5185\u7f6e\u5728hook\u4e2d\uff0c\u65e0\u9700\u5355\u72ec\u5224\u65ad\n        {moreButton}\n    </Spin>);\n};',lang:"javascript"}),a.createElement("h2",{id:"usescreensize"},a.createElement(l.AnchorLink,{to:"#usescreensize","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"useScreenSize"),a.createElement("blockquote",null,a.createElement("p",null,"\u81ea\u9002\u5e94hook")),a.createElement(o.Z,{code:"const Component = () => {\n    const {isSmall, isMiddle, isLarge} = useScreenSize();\n    return <></>\n}",lang:"javascript"}),a.createElement("h2",{id:"userules"},a.createElement(l.AnchorLink,{to:"#userules","aria-hidden":"true",tabIndex:-1},a.createElement("span",{className:"icon icon-link"})),"useRules"),a.createElement("blockquote",null,a.createElement("p",null,"\u81ea\u5b9a\u4e49\u6821\u9a8c\u89c4\u5219")),a.createElement(o.Z,{code:"const inputRules = useRules<'array'> ([RuleType.CHINESE_50]);\n  // \u6216\u8005\n  const {inputRules} = useRules<'object'> ({\n    inputRules: [RuleType.CHINESE_50],\n  });\n\n  // \u4f7f\u7528\u65b9\u5f0f\uff1a\n<ProFormText\n  name='datasourceName'\n  width={\"md\"}\n  label={translate ('metaData.datasource.name')}\n  initialValue={currentDs?.datasourceName}\n  placeholder={translate ('platform.dataSource.name.placeHolder')}\n  rules={[\n      {\n        required: true,\n        message: (translate ('platform.dataSource.name.placeHolder')),\n      },\n    ...inputRules\n  ]}\n/>",lang:"javascript"})))})));n["default"]=function(e){var n=a.useContext(l.context),t=n.demos;return a.useEffect((function(){var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&l.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.createElement(c,{demos:t})}}}]);